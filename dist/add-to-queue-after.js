(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e;e=async function(){for(;!(null!=Spicetify&&Spicetify.CosmosAsync&&null!=Spicetify&&Spicetify.Queue&&null!=Spicetify&&Spicetify.ContextMenu&&null!=Spicetify&&Spicetify.URI&&null!=Spicetify&&Spicetify.Platform);)await new Promise(e=>setTimeout(e,100));function f(){return Spicetify.Queue.nextTracks.filter(e=>"queue"===(null==e?void 0:e.provider)||"true"===(null==(e=null==(e=null==e?void 0:e.contextTrack)?void 0:e.metadata)?void 0:e.is_queued))}async function y(e){var t,i=e[0],a=Spicetify.URI.fromString(i);if(1<e.length||a.type===Spicetify.URI.Type.TRACK||a.type===Spicetify.URI.Type.LOCAL)return e;let c=[];switch(a.type){case Spicetify.URI.Type.PLAYLIST:case Spicetify.URI.Type.PLAYLIST_V2:c=await(await Spicetify.Platform.PlaylistAPI.getContents(i,{limit:9999999999})).items.map(e=>e.uri);break;case Spicetify.URI.Type.ALBUM:c=(t=(t=i).split(":")[2],await(await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/albums/"+t)).tracks.items.map(e=>e.uri))}return c}function p(e,t){var i;return e?(i=(null==(i=null==(i=e.contextTrack)?void 0:i.metadata)?void 0:i.title)||"Unknown Track",(e=null==(e=null==(e=e.contextTrack)?void 0:e.metadata)?void 0:e.artist_name)?i+" - "+e:i):"Track "+(t+1)}let l=[];var i=[];for(let e=0;e<80;e++){let u=e,t=new Spicetify.ContextMenu.Item("Position "+(e+1),async()=>{try{var e,t,i=await y(l),a=u;try{var c,n,o=i.map(e=>({uri:e})),r=f();r&&0!==r.length?a>=r.length-1?(await Spicetify.addToQueue(o),Spicetify.showNotification("Added to end of queue")):(n={uri:null==(e=(c=r[a+1]).contextTrack)?void 0:e.uri,uid:null==(t=c.contextTrack)?void 0:t.uid},await Spicetify.Platform.PlayerAPI.insertIntoQueue(o,{before:n}),Spicetify.showNotification(`Added after "${p(r[a],a)}"`)):(await Spicetify.addToQueue(o),Spicetify.showNotification("Added to queue"))}catch(e){console.error("Failed to insert into queue",e),Spicetify.showNotification("Unable to add to queue. Check console.",!0)}}catch(e){console.error("Failed to add tracks",e),Spicetify.showNotification("Failed to add tracks. Check console.",!0)}},()=>{var e=f();return!(!e||u>=e.length||(t.name=p(e[u],u),0))},void 0,!1);i.push(t)}new Spicetify.ContextMenu.SubMenu("Add to Queue After...",i,e=>{if(!(e=>{if(1<e.length)return 1;switch(Spicetify.URI.fromString(e[0]).type){case Spicetify.URI.Type.TRACK:case Spicetify.URI.Type.PLAYLIST:case Spicetify.URI.Type.PLAYLIST_V2:case Spicetify.URI.Type.ALBUM:case Spicetify.URI.Type.LOCAL:return 1}})(e))return!1;l=e;e=f();return e&&0<e.length},!1).register()},(async()=>{await e()})()})();